<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!doctype html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="utf-8" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;New World — Daily Tracker&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="description" content="A tiny, offline-ready daily checklist that auto-resets at local midnight. All data stays in your browser."&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>:root {</p>
<p class="p1"><span class="Apple-converted-space">      </span>--bg: #0b0f14; <span class="Apple-converted-space">    </span>/* deep slate */</p>
<p class="p1"><span class="Apple-converted-space">      </span>--card: #121823; <span class="Apple-converted-space">  </span>/* panel */</p>
<p class="p1"><span class="Apple-converted-space">      </span>--ink: #e9f0fa;<span class="Apple-converted-space">    </span>/* text */</p>
<p class="p1"><span class="Apple-converted-space">      </span>--muted: #a8b3c7;<span class="Apple-converted-space">  </span>/* secondary */</p>
<p class="p1"><span class="Apple-converted-space">      </span>--accent: #72b7ff; /* links &amp; focus */</p>
<p class="p1"><span class="Apple-converted-space">      </span>--ok: #6dd3a6; <span class="Apple-converted-space">    </span>/* check */</p>
<p class="p1"><span class="Apple-converted-space">      </span>--warn: #ffb870; <span class="Apple-converted-space">  </span>/* buttons */</p>
<p class="p1"><span class="Apple-converted-space">      </span>--danger: #ff8a8a; /* delete */</p>
<p class="p1"><span class="Apple-converted-space">      </span>--ring: #2a3950; <span class="Apple-converted-space">  </span>/* input ring */</p>
<p class="p1"><span class="Apple-converted-space">      </span>--radius: 14px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>html, body { height: 100%; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>body {</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Noto Sans, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: radial-gradient(1200px 600px at 70% -10%, #0e1622 10%, var(--bg) 60%);</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: var(--ink);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.wrap { max-width: 920px; margin: 0 auto; padding: 28px 16px 80px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>header { display:flex; gap:16px; align-items:center; justify-content:space-between; flex-wrap:wrap; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>h1 { font-size: clamp(20px, 3.2vw, 32px); margin: 0; letter-spacing: 0.3px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.sub { color: var(--muted); font-size: 14px; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.grid { display: grid; grid-template-columns: 1fr; gap: 16px; margin-top: 18px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.card { background: linear-gradient(180deg, #131b28, var(--card)); border: 1px solid #1b2a40; border-radius: var(--radius); padding: 18px; box-shadow: 0 6px 22px rgba(0,0,0,.35); }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.row { display:flex; gap:8px; align-items:center; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.row.spread { justify-content: space-between; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.controls { display:flex; gap:8px; flex-wrap:wrap; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>button, input[type="text"], select {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #0f1522; color: var(--ink); border: 1px solid var(--ring); border-radius: 10px; padding: 10px 12px; font-size: 14px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>input[type="text"] { width: 100%; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>button { cursor: pointer; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>button:hover { filter: brightness(1.08); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.primary { border-color: #2a466e; background: #0e1a2c; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.soft { background: #0e131c; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.ok { border-color: #2b5246; background: #0f1f1a; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.warn { border-color: #6a4c1c; background: #241a0a; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.danger { border-color: #5a2a2a; background: #231010; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.tasks { display:flex; flex-direction: column; gap:10px; margin-top:12px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.task { display:grid; grid-template-columns: 28px 1fr auto; gap:10px; align-items:center; padding:10px; border:1px solid #1b2a40; border-radius: 10px; background:#0e1521; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.task.done { opacity: .65; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.task label { display:flex; align-items:center; gap:10px; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.task input[type="checkbox"] {</p>
<p class="p1"><span class="Apple-converted-space">      </span>appearance: none; width: 18px; height: 18px; border-radius: 5px; border:1px solid var(--ring); background:#0c1320; display:grid; place-items:center; cursor:pointer;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.task input[type="checkbox"]:checked { background:#13241f; border-color:#224938; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.task input[type="checkbox"]:checked::after { content:"✓"; font-weight:800; color: var(--ok); font-size:14px; line-height:1; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.task-actions { display:flex; gap:6px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.task-actions button { padding:6px 8px; font-size:12px; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.footer { margin-top: 8px; color: var(--muted); font-size: 13px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>a { color: var(--accent); text-decoration: none; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>a:hover { text-decoration: underline; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.hint { color: var(--muted); font-size:12px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.count { font-size: 13px; color: var(--muted); }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.links { display:flex; gap:10px; flex-wrap:wrap; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.pill { background:#0d1522; border:1px solid #21324b; border-radius:999px; padding:8px 10px; font-size:13px; }</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>@media (min-width: 760px) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>.grid { grid-template-columns: 1.2fr .8fr; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="wrap"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;header&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h1&gt;New World — Daily Tracker&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="sub"&gt;Simple daily checkboxes that auto‑reset at your local midnight. Data is stored only in your browser.&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="count"&gt;&lt;span id="doneCount"&gt;0&lt;/span&gt; / &lt;span id="totalCount"&gt;0&lt;/span&gt; done&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/header&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;section class="grid"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;!-- Checklist --&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="row spread"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;strong&gt;Today's Dailies&lt;/strong&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="controls"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button class="ok" id="checkAllBtn" title="Mark all as done"&gt;Check all&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button class="soft" id="uncheckAllBtn" title="Unmark all"&gt;Uncheck all&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button class="warn" id="resetNowBtn" title="Force daily reset"&gt;Reset now&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="tasks" id="taskList"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="row" style="margin-top:12px; gap:8px;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;input id="newTaskInput" type="text" placeholder="Add a custom daily (e.g., ‘3x Faction missions’)" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button class="primary" id="addTaskBtn"&gt;Add&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="hint" style="margin-top:6px;"&gt;Tip: double‑click a task label to edit inline. Drag to reorder with ▲/▼.&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;!-- Settings &amp; Links --&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;strong&gt;Settings&lt;/strong&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="row" style="margin-top:10px; gap:10px; align-items:center;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;label class="hint"&gt;Daily reset at local midnight.<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;br/&gt;You can also force a reset using &lt;em&gt;Reset now&lt;/em&gt;.</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="row" style="margin-top:12px; gap:8px;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button id="exportBtn" class="soft" title="Download your tasks as a file"&gt;Export&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;input id="importFile" type="file" accept="application/json" style="display:none;" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button id="importBtn" class="soft" title="Import tasks from a file"&gt;Import&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button id="clearBtn" class="danger" title="Delete all tasks (keeps settings)"&gt;Delete all&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="footer" id="nextResetInfo" style="margin-top:12px;"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="footer" style="margin-top:12px;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>Quick links</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="links" style="margin-top:8px;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;a class="pill" href="https://nwdb.info/" target="_blank" rel="noopener"&gt;NW Database&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;a class="pill" href="https://newworld-map.com/" target="_blank" rel="noopener"&gt;Interactive Map&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;a class="pill" href="https://www.reddit.com/r/newworldgame/" target="_blank" rel="noopener"&gt;r/newworldgame&lt;/a&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/section&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="footer" style="margin-top:18px;"&gt;Built as a single HTML file. You can host it anywhere (GitHub Pages, Netlify, Cloudflare Pages) or just keep it locally and open it in your browser.&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>// --- Simple persistent state ---</p>
<p class="p1"><span class="Apple-converted-space">  </span>const STORE_KEY = 'nw-daily-tracker-v1';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const defaultTasks = [</p>
<p class="p1"><span class="Apple-converted-space">    </span>{ id: crypto.randomUUID(), text: '3x Faction missions', done: false },</p>
<p class="p1"><span class="Apple-converted-space">    </span>{ id: crypto.randomUUID(), text: 'Gypsum casts', done: false },</p>
<p class="p1"><span class="Apple-converted-space">    </span>{ id: crypto.randomUUID(), text: 'Gathering cooldowns', done: false },</p>
<p class="p1"><span class="Apple-converted-space">  </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const state = {</p>
<p class="p1"><span class="Apple-converted-space">    </span>tasks: [],</p>
<p class="p1"><span class="Apple-converted-space">    </span>lastResetISO: null, // YYYY-MM-DD of the last reset checkpoint</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function load() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const raw = localStorage.getItem(STORE_KEY);</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (!raw) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>state.tasks = defaultTasks;</p>
<p class="p1"><span class="Apple-converted-space">      </span>state.lastResetISO = todayISO();</p>
<p class="p1"><span class="Apple-converted-space">      </span>save();</p>
<p class="p1"><span class="Apple-converted-space">    </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">      </span>try {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const parsed = JSON.parse(raw);</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.tasks = parsed.tasks || [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.lastResetISO = parsed.lastResetISO || todayISO();</p>
<p class="p1"><span class="Apple-converted-space">      </span>} catch(e) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>console.warn('Bad store; clearing', e);</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.tasks = defaultTasks;</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.lastResetISO = todayISO();</p>
<p class="p1"><span class="Apple-converted-space">        </span>save();</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function save() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>localStorage.setItem(STORE_KEY, JSON.stringify({ tasks: state.tasks, lastResetISO: state.lastResetISO }));</p>
<p class="p1"><span class="Apple-converted-space">    </span>render();</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function todayISO(d=new Date()) {</p>
<p class="p1"><span class="Apple-converted-space">    </span>// local time midnight-based date</p>
<p class="p1"><span class="Apple-converted-space">    </span>const y = d.getFullYear();</p>
<p class="p1"><span class="Apple-converted-space">    </span>const m = String(d.getMonth()+1).padStart(2,'0');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const day = String(d.getDate()).padStart(2,'0');</p>
<p class="p1"><span class="Apple-converted-space">    </span>return `${y}-${m}-${day}`;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function maybeDailyReset() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nowISO = todayISO();</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (nowISO !== state.lastResetISO) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>// New day: reset all done flags</p>
<p class="p1"><span class="Apple-converted-space">      </span>state.tasks = state.tasks.map(t =&gt; ({...t, done:false}));</p>
<p class="p1"><span class="Apple-converted-space">      </span>state.lastResetISO = nowISO;</p>
<p class="p1"><span class="Apple-converted-space">      </span>save();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function nextMidnightInfo() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const now = new Date();</p>
<p class="p1"><span class="Apple-converted-space">    </span>const next = new Date(now);</p>
<p class="p1"><span class="Apple-converted-space">    </span>next.setHours(24,0,0,0); // next local midnight</p>
<p class="p1"><span class="Apple-converted-space">    </span>const ms = next - now;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const hrs = Math.floor(ms/3_600_000), mins = Math.floor((ms%3_600_000)/60_000);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const fmt = `${hrs}h ${String(mins).padStart(2,'0')}m`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const t = next.toLocaleString([], {hour:'2-digit', minute:'2-digit'});</p>
<p class="p1"><span class="Apple-converted-space">    </span>return { in: fmt, at: t };</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function render() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const list = document.getElementById('taskList');</p>
<p class="p1"><span class="Apple-converted-space">    </span>list.innerHTML = '';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>state.tasks.forEach((task, idx) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const el = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">      </span>el.className = 'task' + (task.done ? ' done' : '');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const cb = document.createElement('input');</p>
<p class="p1"><span class="Apple-converted-space">      </span>cb.type = 'checkbox';</p>
<p class="p1"><span class="Apple-converted-space">      </span>cb.checked = task.done;</p>
<p class="p1"><span class="Apple-converted-space">      </span>cb.addEventListener('change', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>task.done = cb.checked; save();</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const label = document.createElement('label');</p>
<p class="p1"><span class="Apple-converted-space">      </span>label.textContent = task.text;</p>
<p class="p1"><span class="Apple-converted-space">      </span>label.title = 'Double‑click to edit';</p>
<p class="p1"><span class="Apple-converted-space">      </span>label.ondblclick = () =&gt; editTaskInline(task, label);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const actions = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">      </span>actions.className = 'task-actions';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const up = document.createElement('button'); up.className='soft'; up.textContent='▲'; up.title='Move up';</p>
<p class="p1"><span class="Apple-converted-space">      </span>up.onclick = () =&gt; { if (idx&gt;0) { state.tasks.splice(idx-1,0, state.tasks.splice(idx,1)[0]); save(); } };</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const down = document.createElement('button'); down.className='soft'; down.textContent='▼'; down.title='Move down';</p>
<p class="p1"><span class="Apple-converted-space">      </span>down.onclick = () =&gt; { if (idx&lt;state.tasks.length-1) { state.tasks.splice(idx+1,0, state.tasks.splice(idx,1)[0]); save(); } };</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const del = document.createElement('button'); del.className='danger'; del.textContent='Delete';</p>
<p class="p1"><span class="Apple-converted-space">      </span>del.onclick = () =&gt; { if (confirm('Delete this task?')) { state.tasks = state.tasks.filter(t=&gt;t.id!==task.id); save(); } };</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>actions.append(up, down, del);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>el.append(cb, label, actions);</p>
<p class="p1"><span class="Apple-converted-space">      </span>list.appendChild(el);</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Counts</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.getElementById('doneCount').textContent = state.tasks.filter(t=&gt;t.done).length;</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.getElementById('totalCount').textContent = state.tasks.length;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Reset info</p>
<p class="p1"><span class="Apple-converted-space">    </span>const info = nextMidnightInfo();</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.getElementById('nextResetInfo').textContent = `Auto‑resets at local midnight (in ${info.in}, at ~${info.at}).`;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function editTaskInline(task, labelEl){</p>
<p class="p1"><span class="Apple-converted-space">    </span>const input = document.createElement('input');</p>
<p class="p1"><span class="Apple-converted-space">    </span>input.type = 'text';</p>
<p class="p1"><span class="Apple-converted-space">    </span>input.value = task.text;</p>
<p class="p1"><span class="Apple-converted-space">    </span>input.onkeydown = (e)=&gt;{ if(e.key==='Enter'){ commit(); } if(e.key==='Escape'){ cancel(); } };</p>
<p class="p1"><span class="Apple-converted-space">    </span>input.onblur = commit;</p>
<p class="p1"><span class="Apple-converted-space">    </span>labelEl.replaceWith(input);</p>
<p class="p1"><span class="Apple-converted-space">    </span>input.focus();</p>
<p class="p1"><span class="Apple-converted-space">    </span>function commit(){ task.text = input.value.trim() || task.text; save(); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>function cancel(){ save(); }</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>// --- Actions ---</p>
<p class="p1"><span class="Apple-converted-space">  </span>function addTask(text){</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(!text) return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>state.tasks.push({ id: crypto.randomUUID(), text, done:false });</p>
<p class="p1"><span class="Apple-converted-space">    </span>save();</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function exportData(){</p>
<p class="p1"><span class="Apple-converted-space">    </span>const blob = new Blob([JSON.stringify(state, null, 2)], {type:'application/json'});</p>
<p class="p1"><span class="Apple-converted-space">    </span>const url = URL.createObjectURL(blob);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const a = document.createElement('a');</p>
<p class="p1"><span class="Apple-converted-space">    </span>a.href = url; a.download = 'new-world-dailies.json'; a.click();</p>
<p class="p1"><span class="Apple-converted-space">    </span>URL.revokeObjectURL(url);</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function importData(file){</p>
<p class="p1"><span class="Apple-converted-space">    </span>const reader = new FileReader();</p>
<p class="p1"><span class="Apple-converted-space">    </span>reader.onload = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>try {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const obj = JSON.parse(reader.result);</p>
<p class="p1"><span class="Apple-converted-space">        </span>if(Array.isArray(obj.tasks)){</p>
<p class="p1"><span class="Apple-converted-space">          </span>state.tasks = obj.tasks.map(t=&gt;({ id: t.id || crypto.randomUUID(), text: String(t.text||'Untitled'), done: !!t.done }));</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>state.lastResetISO = obj.lastResetISO || todayISO();</p>
<p class="p1"><span class="Apple-converted-space">        </span>save();</p>
<p class="p1"><span class="Apple-converted-space">      </span>} catch(e){ alert('Invalid file.'); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>reader.readAsText(file);</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>// --- Init ---</p>
<p class="p1"><span class="Apple-converted-space">  </span>load();</p>
<p class="p1"><span class="Apple-converted-space">  </span>maybeDailyReset();</p>
<p class="p1"><span class="Apple-converted-space">  </span>render();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>// Wire UI</p>
<p class="p1"><span class="Apple-converted-space">  </span>document.getElementById('addTaskBtn').onclick = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const inp = document.getElementById('newTaskInput');</p>
<p class="p1"><span class="Apple-converted-space">    </span>addTask(inp.value.trim()); inp.value=''; inp.focus();</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p1"><span class="Apple-converted-space">  </span>document.getElementById('newTaskInput').addEventListener('keydown', (e)=&gt;{ if(e.key==='Enter'){ document.getElementById('addTaskBtn').click(); }});</p>
<p class="p1"><span class="Apple-converted-space">  </span>document.getElementById('checkAllBtn').onclick = ()=&gt;{ state.tasks = state.tasks.map(t=&gt;({...t, done:true})); save(); };</p>
<p class="p1"><span class="Apple-converted-space">  </span>document.getElementById('uncheckAllBtn').onclick = ()=&gt;{ state.tasks = state.tasks.map(t=&gt;({...t, done:false})); save(); };</p>
<p class="p1"><span class="Apple-converted-space">  </span>document.getElementById('resetNowBtn').onclick = ()=&gt;{ if(confirm('Reset all daily checkmarks?')){ state.tasks = state.tasks.map(t=&gt;({...t, done:false})); state.lastResetISO = todayISO(); save(); } };</p>
<p class="p1"><span class="Apple-converted-space">  </span>document.getElementById('clearBtn').onclick = ()=&gt;{ if(confirm('Delete ALL tasks?')){ state.tasks = []; save(); } };</p>
<p class="p1"><span class="Apple-converted-space">  </span>document.getElementById('exportBtn').onclick = exportData;</p>
<p class="p1"><span class="Apple-converted-space">  </span>document.getElementById('importBtn').onclick = ()=&gt; document.getElementById('importFile').click();</p>
<p class="p1"><span class="Apple-converted-space">  </span>document.getElementById('importFile').addEventListener('change', (e)=&gt;{ const f = e.target.files?.[0]; if(f) importData(f); e.target.value=''; });</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>// Also check reset on page visibility change (if you left the tab open overnight)</p>
<p class="p1"><span class="Apple-converted-space">  </span>document.addEventListener('visibilitychange', ()=&gt;{ if(!document.hidden){ maybeDailyReset(); render(); } });</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
